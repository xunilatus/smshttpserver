<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<style>
		* {
          box-sizing: border-box;
        }

        /* Create two unequal columns that floats next to each other */
        .column {
          float: left;
          padding: 10px;
          height: 300px; /* Should be removed. Only for demonstration */
        }

        .left {
          width: 25%;
        }

        .right {
          width: 75%;
        }

        /* Clear floats after the columns */
        .row:after {
          content: "";
          display: table;
          clear: both;
        }
        form {
            width: 80%;
            margin-left: auto;
            margin-right: auto;
            overflow: hidden;
            overflow: hidden;
            background-color: #FCCFFF ;
        }
        input {
            width: 100%;
        }
        span {
            display: block;
            overflow: hidden;
            padding-right:10px;
        }
        button {
            float: right;
        }
	</style>
</head>
<body>

<h2>SMS MESSAGES</h2>

<div class="row">
	<div class="column left" style="background-color:#E1E3E7 ;overflow:auto;">
		<h2>PHONE NUMBERS</h2>
		<p>Some text..</p>
		<!-- Other content -->
	</div>
	<div class="column right" style="background-color:#F9FBFF ;overflow:auto" readonly>
		<p><textarea id="outputTextbox" rows="60" cols="80" readonly></textarea></p>
	</div>
</div>

<!-- Your form and buttons -->
<form id="myForm" method="POST" action="/message">
	<label for="inputFieldPhone">Enter Phone Number</label>
	<input type="text" id="inputFieldPhone" name="phoneNumber">
	<label for="inputField">Enter Message:</label>
	<input type="text" id="inputField" name="message">
	<button type="submit">Send</button>
</form>

<a href="https://www.titips.com">https://www.titips.com</a><br>

<button>SYNC SMS</button>
<button>UPLOAD</button>
<button>DOWNLOAD</button>

<!-- Your JavaScript -->
<script>
	document.addEventListener('DOMContentLoaded', function() {
        var outputTextbox = document.getElementById("outputTextbox");
        var inputField = document.getElementById("inputField");
        var inputFieldPhone = document.getElementById("inputFieldPhone"); // New input field
        var myForm = document.getElementById("myForm");

        // Load saved text from local storage
        var savedText = localStorage.getItem("savedText");
        if (savedText) {
            outputTextbox.value = savedText;
        }

        // Add event listener for form submission
        myForm.addEventListener("submit", function(event) {
            event.preventDefault(); // Prevent default form submission behavior
            var phoneNumber = inputFieldPhone.value;
            var message = inputField.value;

            // Call sendSMSMessage() to send the SMS
            sendSMSMessage(phoneNumber, message);

            // Append the message to the output textbox
            outputTextbox.value += message + "\n";

            // Save the updated text to local storage
            localStorage.setItem("savedText", outputTextbox.value);

            // Clear the input fields after submission
            inputField.value = "";
            inputFieldPhone.value = "";
        });
    });

    // Function to send SMS message
    function sendSMSMessage(phoneNumber, message) {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "/message", true);
        xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
        xhr.onreadystatechange = function() {
            if (xhr.readyState === XMLHttpRequest.DONE) {
                if (xhr.status === 200) {
                    // Server response received successfully
                    var responseText = xhr.responseText;
                    console.log("Server response: " + responseText);
                    // You can update the DOM or display a confirmation message here
                    // For example:
                    alert("Message received from server");
                } else {
                    // Error handling
                    console.error("Error: Server response status " + xhr.status);
                }
            }
        };
        xhr.send("phoneNumber=" + encodeURIComponent(phoneNumber) + "&message=" + encodeURIComponent(message));
    }
</script>

</body>
</html>